app.factory("ReviewService",["$http","$location",function(a,b){function c(){try{void 0==g.empInfo.RegisId&&console.log("send err")}catch(a){b.path("/")}}var d={},e={},f={},g={},h={currentGoal:1,currentHAIR:5,currentStrengthDev:10},i={hairSubsectionH:!1,hairSubsectionA:!1,hairSubsectionI:!1,hairSubsectionR:!1},j={leader:!1,emp:!1},k={typeField:!1,typeSalon:!1},l={empOneTwo:!1,empOneToFive:!1,empThreePlus:!1,empFivePlus:!1,empSix:!1,empSixAndNoEmpSignature:!1,empSeven:!1},m={empOneTwo:!1,empOneToFive:!1,empThreePlus:!1,empFivePlus:!1,empSix:!1,empSixAndNoEmpSignature:!1,empSeven:!1,leaderThreePlus:!1,leaderThreeFour:!1,leaderThreeFourFive:!1,leaderFive:!1,leaderSix:!1,leaderSixAndNoLeaderSignature:!1,leaderSixPlus:!1},n={empReadyToSubmit:!1,leaderReadyToSubmit:!1},o=function(){if(1==j.emp)if(1==k.typeField)if(0==g.subsections[0].isCompleted)n.empReadyToSubmit=!1;else{for(var a=!0,b=6;14>b;b++)0==g.subsections[b].isCompleted&&(a=!1);n.empReadyToSubmit=a}else{for(var a=!0,b=1;14>b;b++)0==g.subsections[b].isCompleted&&(a=!1);n.empReadyToSubmit=a}else if(1==k.typeField)if(0==g.subsections[0].isLeaderCompleted)n.leaderReadyToSubmit=!1;else{for(var a=!0,b=6;14>b;b++)0==g.subsections[b].isLeaderCompleted&&(a=!1);n.leaderReadyToSubmit=a}else{for(var a=!0,b=1;14>b;b++)0==g.subsections[b].isLeaderCompleted&&(a=!1);n.leaderReadyToSubmit=a}},p=function(){a.get("token/1").then(function(a){d={regisId:a.data.regisId},q({regisId:a.data.regisId}),s({regisId:a.data.regisId})})},q=function(b){a.post("/employeeData",b).then(function(a){e.empInfo=a.data[0][0],e.subsections=a.data[1],v(),u(e.empInfo.ReviewType)})},r=function(c){var d={regisId:c};a.post("/employeeData",d).then(function(a){g.empInfo=a.data[0][0],g.subsections=a.data[1],u(g.empInfo.ReviewType),w(),o(),b.path("/map")})},s=function(b){a.post("/employeeData/leaderReviews",b).then(function(a){f.data=a.data})},t=function(){r(e.empInfo.RegisId),b.path("/signature")},u=function(a){"FS"==a?(k.typeField=!0,k.typeSalon=!1):(k.typeField=!1,k.typeSalon=!0)},v=function(){1==e.empInfo.ReviewStatus||2==e.empInfo.ReviewStatus?(l.empOneTwo=!0,l.empOneToFive=!0):3==e.empInfo.ReviewStatus||4==e.empInfo.ReviewStatus?(l.empOneTwo=!1,l.empOneToFive=!0,l.empThreePlus=!0):5==e.empInfo.ReviewStatus?(l.empOneToFive=!0,l.empThreePlus=!0,l.empFivePlus=!0):6==e.empInfo.ReviewStatus?(l.empOneToFive=!1,l.empThreePlus=!0,l.empFivePlus=!0,l.empSix=!0,null!=e.empInfo.EmployeeSignature?l.empSixAndNoEmpSignature=!1:l.empSixAndNoEmpSignature=!0):7==e.empInfo.ReviewStatus?(l.empThreePlus=!0,l.empFivePlus=!0,l.empSeven=!0):(l.empOneTwo=!1,l.empOneToFive=!1,l.empThreePlus=!1,l.empFivePlus=!1,l.empSix=!1,l.empSixAndNoEmpSignature=!1,l.empSeven=!1)},w=function(){d.regisId==g.empInfo.RegisId?(j.emp=!0,j.leader=!1):d.regisId==g.empInfo.LeaderRegisId?(j.emp=!1,j.leader=!0):console.log("Error.  User is neither employee nor leader for this review."),1==j.leader?(m.empOneTwo=!1,m.empOneToFive=!1,m.empThreePlus=!1,m.empFivePlus=!1,m.empSix=!1,m.empSixAndNoEmpSignature=!1,m.empSeven=!1,3==g.empInfo.ReviewStatus||4==g.empInfo.ReviewStatus?(m.leaderThreePlus=!0,m.leaderThreeFour=!0,m.leaderThreeFourFive=!0,m.leaderFive=!1,m.leaderSix=!1,m.leaderSixPlus=!1,m.leaderSixAndNoLeaderSignature=!1):5==g.empInfo.ReviewStatus?(m.leaderThreePlus=!0,m.leaderThreeFour=!1,m.leaderThreeFourFive=!0,m.leaderFive=!0,m.leaderSix=!1,m.leaderSixPlus=!1,m.leaderSixAndNoLeaderSignature=!1):6==g.empInfo.ReviewStatus?(m.leaderThreePlus=!0,m.leaderThreeFour=!1,m.leaderThreeFourFive=!1,m.leaderFive=!1,m.leaderThreePlus=!0,m.leaderSix=!0,m.leaderSixPlus=!0,6==g.empInfo.ReviewStatus&&null!=g.empInfo.LeaderSignature?m.leaderSixAndNoLeaderSignature=!1:m.leaderSixAndNoLeaderSignature=!0):7==g.empInfo.ReviewStatus?(m.leaderThreePlus=!0,m.leaderThreeFour=!1,m.leaderThreeFourFive=!1,m.leaderFive=!1,m.leaderSix=!1,m.leaderSixPlus=!0,m.leaderSixAndNoLeaderSignature=!1):(m.leaderThreePlus=!1,m.leaderThreeFour=!1,m.leaderThreeFourFive=!1,m.leaderFive=!1,m.leaderSix=!1,m.leaderSixPlus=!1,m.leaderSixAndNoLeaderSignature=!1)):(m.leaderThreePlus=!1,m.leaderThreeFour=!1,m.leaderThreeFourFive=!1,m.leaderFive=!1,m.leaderSix=!1,m.leaderSixPlus=!1,1==g.empInfo.ReviewStatus||2==g.empInfo.ReviewStatus?(m.empOneTwo=!0,m.empOneToFive=!0):3==g.empInfo.ReviewStatus||4==g.empInfo.ReviewStatus?(m.empOneTwo=!1,m.empOneToFive=!0,m.empThreePlus=!0):5==g.empInfo.ReviewStatus?(m.empOneToFive=!0,m.empThreePlus=!0,m.empFivePlus=!0):6==g.empInfo.ReviewStatus?(m.empThreePlus=!0,m.empFivePlus=!0,m.empSix=!0,6==g.empInfo.ReviewStatus&&null!=g.empInfo.EmployeeSignature?m.empSixAndNoEmpSignature=!1:m.empSixAndNoEmpSignature=!0):7==g.empInfo.ReviewStatus?(m.empThreePlus=!0,m.empFivePlus=!0,m.empSeven=!0):(m.empOneTwo=!0,m.empOneToFive=!0,m.empThreePlus=!0,m.empFivePlus=!0,m.empSix=!0,m.empSixAndNoEmpSignature=!0,m.empSeven=!0))};return{loadHomePageInfo:p,getReview:r,updateMyReviewStatuses:v,signOwnReview:t,checkIfLoggedIn:c,myReview:e,currentReview:g,teamReviews:f,thisUser:d,subsections:h,imgHAIR:i,statuses:m,submitStatus:n,myReviewStatuses:l,role:j,type:k}}]);